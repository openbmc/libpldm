{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5e6d4dba_bf6fa569",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-12T23:50:05Z",
      "side": 1,
      "message": "Hi Jino, sorry for the delay. Thanks for tackling handling the PDRs in terms of iterators, this is generally a great thing for library ergonomics. I do have some requests inline however.",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3653cf8b_4f2bcdc7",
        "filename": "CHANGELOG.md",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-12T23:50:05Z",
      "side": 1,
      "message": "The `### Added` section is immediately below. It would make more sense to move these there.\n\nSeparately, the changelog is for users of the library. The git history records implementation details. Users should not be calling the `*_init()` and `*_next()` APIs directly. Rather, they should be using the iterator macros. Let\u0027s keep the descriptions here focused on how the user will use the APIs.",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 23,
        "endChar": 61
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1050751f_3d3748fe",
        "filename": "CHANGELOG.md",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1002348
      },
      "writtenOn": "2025-11-24T06:41:30Z",
      "side": 1,
      "message": "Hi Andrew, I\u0027ve renamed the iterator macros as per your suggestion below and moved them to ### Added section",
      "parentUuid": "3653cf8b_4f2bcdc7",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 23,
        "endChar": 61
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae977008_57c077ef",
        "filename": "CHANGELOG.md",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-28T00:04:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1050751f_3d3748fe",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 23,
        "endChar": 61
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a7852bc5_bbab470b",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-12T23:50:05Z",
      "side": 1,
      "message": "While there are historically instances of typedefs in the codebase (e.g. immediately above), please don\u0027t add more without good reason. The only good reason right now is to abstract over a type for the purpose of renaming it down the track. I don\u0027t expect that\u0027s intended here.\n\nPlease audit the rest of the patch to remove the typedefs.",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab9472ad_a1ed5147",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1002348
      },
      "writtenOn": "2025-11-24T06:41:30Z",
      "side": 1,
      "message": "I\u0027ve removed this typedef for struct pldm_state_effecter_pdr as it\u0027s not required anymore.",
      "parentUuid": "a7852bc5_bbab470b",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c4195396_ab8a4e65",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-28T00:04:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ab9472ad_a1ed5147",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6bdda6e_e75518a8",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-12T23:50:05Z",
      "side": 1,
      "message": "Please make sure that the type name is appropriately prefixed:\n\nhttps://github.com/openbmc/libpldm/blob/9f6b9b3aca29a022c597a87f445d487d8020fe51/CONTRIBUTING.md#L249-L264\n\nNote that this also discusses using e.g. `_pdr_` or `_platform_` as part of that prefix.\n\nPlease audit the rest of the patch for such concerns and fix them as appropriate.\n\nIf you haven\u0027t already, please read the rest of `CONTRIBUTING.md`.",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa3eb5e7_2c0e69be",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1002348
      },
      "writtenOn": "2025-11-24T06:41:30Z",
      "side": 1,
      "message": "I\u0027ve removed the typedef but the forward declaration of struct state_effecter_possible_states is required as adding \u003clibpldm/platform.h\u003e in pdr.h caused additional compilation errors. Please let me know alternative ways to resolve this.",
      "parentUuid": "d6bdda6e_e75518a8",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a05e91d6_72f6d5cc",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-28T00:04:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aa3eb5e7_2c0e69be",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4535e6a_45955287",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-12T23:50:05Z",
      "side": 1,
      "message": "POSIX reserves the namespace of all types suffixed with `_t` (see the tables in section 2.2.2 (\"The Name Space\") of The Open Group Base Specifications Issue 8, IEEE Std 1003.1-2024). Please avoid adding any further instances.\n\nAdditionaly, this is another typedef. Please name the struct, drop the typedef, and audit the rest of the patch for further instances of anonymous structs.",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "042f4783_605df44a",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1002348
      },
      "writtenOn": "2025-11-24T06:41:30Z",
      "side": 1,
      "message": "Thanks for letting me know about this. I have removed typedefs \u0026 _t suffixes from the structs.",
      "parentUuid": "e4535e6a_45955287",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef395cdc_82b10807",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-28T00:04:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "042f4783_605df44a",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b4d70f6_d953543c",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-12T23:50:05Z",
      "side": 1,
      "message": "I think this is a mischaracterisation. This _is_ the API that users should use. If we\u0027re to be selective about what we document, _these_ macros are what need it. The documentation on the `*_init()` and `*_next()` APIs above is less of a priority precisely because they\u0027re hidden by use of these macros.\n\nFor an example of what I\u0027d like to see, there\u0027s this:\n\nhttps://github.com/openbmc/libpldm/blob/9f6b9b3aca29a022c597a87f445d487d8020fe51/include/libpldm/firmware_update.h#L2855-L2924",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 157,
        "endChar": 22
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d653cfe5_0120674a",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1002348
      },
      "writtenOn": "2025-11-24T06:41:30Z",
      "side": 1,
      "message": "I\u0027ve added them to changelogs and also added comment for it.",
      "parentUuid": "9b4d70f6_d953543c",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 157,
        "endChar": 22
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "52b58b72_2079ded5",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-28T00:04:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d653cfe5_0120674a",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 157,
        "endChar": 22
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c2a7f5b_80d15bcc",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-12T23:50:05Z",
      "side": 1,
      "message": "It probably needs to be documented in `CONTRIBUTING.md`, but I\u0027d like us to be consistent with the existing iterator macros, which means two things: Lower-case naming, and prefixing them as `foreach_`, followed by the type-name.",
      "range": {
        "startLine": 158,
        "startChar": 8,
        "endLine": 158,
        "endChar": 35
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "359e3802_e4ed75c4",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 1002348
      },
      "writtenOn": "2025-11-24T06:41:30Z",
      "side": 1,
      "message": "Done. Renamed both of them with lower case naming and prefixed them in foreach_ and relevant typename. Also added error code support so that the macro users can get error info.",
      "parentUuid": "8c2a7f5b_80d15bcc",
      "range": {
        "startLine": 158,
        "startChar": 8,
        "endLine": 158,
        "endChar": 35
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "027700ab_177db810",
        "filename": "include/libpldm/pdr.h",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-28T00:04:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "359e3802_e4ed75c4",
      "range": {
        "startLine": 158,
        "startChar": 8,
        "endLine": 158,
        "endChar": 35
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3bb01b8b_1f4ba017",
        "filename": "src/dsp/pdr.c",
        "patchSetId": 1
      },
      "lineNbr": 2404,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-12T23:50:05Z",
      "side": 1,
      "message": "I\u0027d rather not see more bespoke overflow testing. Can you discuss why you\u0027re not using the msgbuf APIs? I can\u0027t see a reason you should be avoiding them. They solve these problems in a way that, as a maintainer reviewing the changes, I know I don\u0027t have to worry about analysing whether you\u0027ve missed any checks.",
      "range": {
        "startLine": 2397,
        "startChar": 1,
        "endLine": 2404,
        "endChar": 2
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe743d3d_d8ac8b97",
        "filename": "src/dsp/pdr.c",
        "patchSetId": 1
      },
      "lineNbr": 2404,
      "author": {
        "id": 1002348
      },
      "writtenOn": "2025-11-24T06:41:30Z",
      "side": 1,
      "message": "As per your suggestion, I\u0027ve refactored my code to make use of msgbuf APIs.",
      "parentUuid": "3bb01b8b_1f4ba017",
      "range": {
        "startLine": 2397,
        "startChar": 1,
        "endLine": 2404,
        "endChar": 2
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f1cf8241_e06c6f3c",
        "filename": "src/dsp/pdr.c",
        "patchSetId": 1
      },
      "lineNbr": 2404,
      "author": {
        "id": 1002348
      },
      "writtenOn": "2026-02-03T04:25:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fe743d3d_d8ac8b97",
      "range": {
        "startLine": 2397,
        "startChar": 1,
        "endLine": 2404,
        "endChar": 2
      },
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4427b8f3_e9c97d75",
        "filename": "src/dsp/pdr.c",
        "patchSetId": 1
      },
      "lineNbr": 2407,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-12T23:50:05Z",
      "side": 1,
      "message": "I expect we don\u0027t want this to be an error condition.",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35062581_52f30717",
        "filename": "src/dsp/pdr.c",
        "patchSetId": 1
      },
      "lineNbr": 2407,
      "author": {
        "id": 1002348
      },
      "writtenOn": "2025-11-24T06:41:30Z",
      "side": 1,
      "message": "Removed this check from the code.",
      "parentUuid": "4427b8f3_e9c97d75",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c9e202d_c1045f5a",
        "filename": "src/dsp/pdr.c",
        "patchSetId": 1
      },
      "lineNbr": 2407,
      "author": {
        "id": 1002348
      },
      "writtenOn": "2026-02-03T04:25:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "35062581_52f30717",
      "revId": "715835f54f7c84a9e61fe74724d284ceb55bd502",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}