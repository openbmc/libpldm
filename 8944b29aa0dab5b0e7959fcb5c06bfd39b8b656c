{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "749d1896_cd8178cc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 26
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "Hi Lora, thanks for the changes. I\u0027m picking at the details a bit here because I want future changes adding support for OEM messages to use this work as a reference. Thanks for bearing with me.",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d36a29ad_0a793273",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "Ah, I just realised the file uses \u0027function_description\u0027 in the name. Can we please rename it to `file-io.md`? Again, we\u0027re documenting the message formats here, not any libpldm APIs.",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c12a4d4_103af51c",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 0,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-23T08:55:50Z",
      "side": 1,
      "message": "I have been renamed to file-io.md. Thank you.",
      "parentUuid": "d36a29ad_0a793273",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9cbd3a7_3a765ee9",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 5,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "The documentation for messages shouldn\u0027t mention APIs. APIs involve a whole set of further choices. Here we\u0027re just trying to nail down the message format, so the location, type and semantics of data in a serialised message.\n\nThis should be e.g. `Read`. Generally messages imply both request and response, so we don\u0027t list that here.",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe55f949_ce4d32e1",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 5,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-23T08:55:50Z",
      "side": 1,
      "message": "I removed unnecessary titles \"List of read file IO messages\".",
      "parentUuid": "d9cbd3a7_3a765ee9",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b6255dc_c929ce14",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 7,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "Sorry, I should have clarified in my previous comment: This should be `Read Message Format`.",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d2e05cc_c75a646b",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 7,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-23T08:55:50Z",
      "side": 1,
      "message": "Done. Please check, thank you.",
      "parentUuid": "9b6255dc_c929ce14",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7898dd19_2b1a1b33",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 9,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "This should be `Table 1`, right? The numbering for the tables below should be incremented.\n\nSo we should have:\n\n```\n### Table 1. Read Request\n\n...\n```",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4c15d85a_7d1e04db",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 9,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-23T08:55:50Z",
      "side": 1,
      "message": "Done. Please check, thank you.",
      "parentUuid": "7898dd19_2b1a1b33",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e758bfc6_0bda7369",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 11,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "I just had a thought: Perhaps it would be best if we split these into separate `Name` and `Description` columns. Put the bit on the left of the `\u003cbr\u003e` into the `Name` column, and the bit on the right into the `Description` column.\n\nAlso, I think it might be best if we rename the `Byte` column to `Offset`.\n\nSo the table becomes:\n\n```\n| Offset | Type | Name | Description |\n| ------ | ---- | ---- | ----------- |\n```\n\nPlease use this scheme for the tables below where appropriate (i.e. what is currently `Table 1` uses a different scheme and my suggestion above doesn\u0027t apply there).",
      "range": {
        "startLine": 11,
        "startChar": 28,
        "endLine": 11,
        "endChar": 32
      },
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae658a76_6cde9797",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 11,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-23T08:55:50Z",
      "side": 1,
      "message": "Done. Please check, thank you.",
      "parentUuid": "e758bfc6_0bda7369",
      "range": {
        "startLine": 11,
        "startChar": 28,
        "endLine": 11,
        "endChar": 32
      },
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "912fceb0_ba2d8e9c",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 16,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "This is `Table 2`, so:\n\n```\n### Table 2. Read response\n\n...\n```",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "93974563_baa22fc0",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 16,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-23T08:55:50Z",
      "side": 1,
      "message": "Done. Please check, thank you.",
      "parentUuid": "912fceb0_ba2d8e9c",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e490f9e_58f82196",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 21,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "Table number needs updating based on the above.",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "daa1e93d_db0db8f9",
        "filename": "docs/oem/meta/file_io_function_description.md",
        "patchSetId": 26
      },
      "lineNbr": 21,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-23T08:55:50Z",
      "side": 1,
      "message": "Done. Please check, thank you.",
      "parentUuid": "0e490f9e_58f82196",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9066d5d_b87b3143",
        "filename": "tests/oem/meta/fileio.cpp",
        "patchSetId": 26
      },
      "lineNbr": 93,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "Please test each of your changes with `./scripts/pre-submit` and make sure there are no errors. These tests need guards around them so that they aren\u0027t built when the testing symbols are excluded from the ABI.\n\nThe straight-forward way to do this is with `git rebase -x ./scripts/pre-submit origin/main`.",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b628e9ff_1c395d66",
        "filename": "tests/oem/meta/fileio.cpp",
        "patchSetId": 26
      },
      "lineNbr": 93,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-23T08:55:50Z",
      "side": 1,
      "message": "Sorry, I encountered the following problems during execution. It seems that the mctp.h file under the linux repo cannot be found and stopped.\nI tried to clone the linux repo at the same level as the libpldm folder, but this error message still appeared.\n\nExecution result：\n[1/86] Compiling C object src/libpldm.so.0.8.0.p/transport_af-mctp.c.o\nFAILED: src/libpldm.so.0.8.0.p/transport_af-mctp.c.o\nccache cc -Isrc/libpldm.so.0.8.0.p -Isrc -I../src -fvisibility\u003dhidden -fdiagnostics-color\u003dalways -D_FILE_OFFSET_BITS\u003d64 -Wall -Winvalid-pch -Wextra -Wpedantic -Werror -std\u003dc17 -Og -g -D_GNU_SOURCE -DLIBPLDM_API_DEPRECATED -DLIBPLDM_API_TESTING -include config.h -fPIC -isystem../include -isysteminclude -MD -MQ src/libpldm.so.0.8.0.p/transport_af-mctp.c.o -MF src/libpldm.so.0.8.0.p/transport_af-mctp.c.o.d -o src/libpldm.so.0.8.0.p/transport_af-mctp.c.o -c ../src/transport/af-mctp.c\n../src/transport/af-mctp.c:15:10: fatal error: linux/mctp.h: No such file or directory\n   15 | #include \u003clinux/mctp.h\u003e\n      |          ^~~~~~~~~~~~~~\ncompilation terminated.\n[62/86] Compiling C++ object tests/dsp_platform.p/dsp_platform.cpp.o\nninja: build stopped: subcommand failed.",
      "parentUuid": "d9066d5d_b87b3143",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3352a8e5_9169d9d5",
        "filename": "tests/oem/meta/fileio.cpp",
        "patchSetId": 26
      },
      "lineNbr": 93,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-27T01:19:01Z",
      "side": 1,
      "message": "You can run it in the OpenBMC CI container. There are some hints here:\n\nhttps://github.com/openbmc/docs/blob/master/testing/local-ci-build.md\n\nBut instead of running the CI script, pass `-it` to the `docker` invocation to drop to a shell. Then you should have the correct environment set up to run the pre-submit script.\n\nThe key thing is this part of my initial comment:\n\n\u003e These tests need guards around them so that they aren\u0027t built when the testing symbols are excluded from the ABI.\n\nSee how it\u0027s done with the tests in other files.",
      "parentUuid": "b628e9ff_1c395d66",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb8e7e9b_daf9d580",
        "filename": "tests/oem/meta/fileio.cpp",
        "patchSetId": 26
      },
      "lineNbr": 93,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-30T09:28:53Z",
      "side": 1,
      "message": "Sorry, according to your description it should be：\n1. Use docker build command to build an image based on Dockerfile\n(Should you be looking for the Dockerfile in the openbmc repo?)\ncommand：docker build -t $image -f ./openbmc/poky/bitbake/contrib/prserv/Dockerfile .\n2. Open a container based on the constructed image\ncommand：docker run --interactive --tty $image /bin/bash\n3. Execute the script in the container\n\nBut a problem occurred when I performed step 1. It seems that the folder inside docker cannot be found.\nI\u0027m sorry, so I still didn\u0027t execute pre-submit script successfully.\nIt may take some time to research what the problem is.\n\nFinally I execute CI build： [Not sure if this behavior helps]\n1. Run CI for testing purposes only\n/data/chris/ci_test_area/libpldm \u003e meson test --print-errorlogs --repeat 1 -C build\nninja: Entering directory `/data/chris/ci_test_area/libpldm/build\u0027\nninja: no work to do.\n 1/22 dsp/bios_table_iter                            OK              0.19s\n 2/22 instance-id                                    OK              0.18s\n 3/22 msgbuf                                         OK              0.17s\n 4/22 responder                                      OK              0.17s\n 5/22 utils                                          OK              0.16s\n 6/22 dsp/base                                       OK              0.15s\n 7/22 dsp/bios                                       OK              0.13s\n 8/22 dsp/fru                                        OK              0.12s\n 9/22 dsp/pdr                                        OK              0.12s\n10/22 transport/transport                            OK              0.10s\n11/22 oem/ibm/fileio                                 OK              0.05s\n12/22 oem/ibm/host                                   OK              0.04s\n13/22 oem/meta/fileio                                OK              0.03s\n14/22 msgbuf_generic                                 OK              0.03s\n15/22 dsp/platform                                   OK              0.14s\n16/22 dsp/bios_table                                 OK              0.26s\n17/22 dsp/firmware_update                            OK              0.26s\n18/22 transport/send_recv_one                        OK              1.01s\n19/22 transport/send_recv_timeout                    OK              4.82s\n20/22 transport/send_recv_unwanted                   OK              4.81s\n21/22 transport/send_recv_wrong_command_code         OK              4.82s\n22/22 transport/send_recv_wrong_pldm_type            OK              4.82s\n\nOk:                 22\nExpected Fail:      0\nFail:               0\nUnexpected Pass:    0\nSkipped:            0\nTimeout:            0\n\nFull log written to /data/chris/ci_test_area/libpldm/build/meson-logs/testlog.txt\n\n2. Run CI on local changed Repo\nI only retrieve the following results：\nChecking tests/dsp/fru.cpp ...\n7/42 files checked 0% done\nChecking tests/transport/send_recv_unwanted.cpp ...\nChecking tests/dsp/pdr.cpp ...\nChecking tests/dsp/platform.cpp ...\nChecking tests/transport/transport.cpp ...\nChecking tests/transport/send_recv_one.cpp ...\nChecking tests/oem/ibm/host.cpp ...\nChecking tests/transport/send_recv_timeout.cpp ...\n8/42 files checked 0% done\nChecking tests/msgbuf_generic.c ...\nChecking tests/transport/send_recv_wrong_command_code.cpp ...\nChecking tests/transport/send_recv_wrong_pldm_type.cpp ...\n9/42 files checked 0% done\nChecking tests/oem/ibm/fileio.cpp ...\nChecking tests/oem/meta/fileio.cpp ...\n10/42 files checked 0% done\n11/42 files checked 0% done\n12/42 files checked 0% done\n\nDoes this mean that tests/oem/meta/fileio.cpp has no errors?",
      "parentUuid": "3352a8e5_9169d9d5",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f6803abe_b63ccaf2",
        "filename": "tests/oem/meta/fileio.cpp",
        "patchSetId": 26
      },
      "lineNbr": 93,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-30T10:36:56Z",
      "side": 1,
      "message": "Hi Andrew：\nI asked my former colleagues and found out that it is because our server version is too old (Ubuntu 20.04.6) and does not have af mctp.\nWe need to add this commit to run unit test.\nlink：https://gerrit.openbmc.org/c/openbmc/libpldm/+/70195\n\nAfter adding this commit, the results of executing the pre-submit script will be Pass.\n\nNote:\nI changed label from LIBPLDM_ABI_TESTING to LIBPLDM_ABI_STABLE first so that I can find the function (pldm_oem_meta_file_io_write_req_data, decode_oem_meta_file_io_write_req and decode_oem_meta_file_io_read_req) during build.\n\nThank you.\n\nTest log：\n......\nFound ninja-1.10.0 at /usr/bin/ninja\nCleaning... 18 files.\n[68/68] Linking target tests/dsp_platform\nninja: Entering directory `/data/lora/LF_BMC/libpldm/tmp.oQjw1lARBs\u0027\nninja: no work to do.\n 1/16 dsp/bios_table_iter         OK              0.13s\n 2/16 instance-id                 OK              0.12s\n 3/16 msgbuf                      OK              0.12s\n 4/16 responder                   OK              0.11s\n 5/16 utils                       OK              0.10s\n 6/16 dsp/base                    OK              0.10s\n 7/16 dsp/bios                    OK              0.09s\n 8/16 dsp/firmware_update         OK              0.08s\n 9/16 dsp/fru                     OK              0.07s\n10/16 dsp/pdr                     OK              0.07s\n11/16 dsp/platform                OK              0.06s\n12/16 oem/ibm/fileio              OK              0.05s\n13/16 oem/ibm/host                OK              0.04s\n14/16 oem/meta/fileio             OK              0.04s\n15/16 msgbuf_generic              OK              0.03s\n16/16 dsp/bios_table              OK              0.26s\n\nOk:                 16\nExpected Fail:      0\nFail:               0\nUnexpected Pass:    0\nSkipped:            0\nTimeout:            0\n\nFull log written to /data/lora/LF_BMC/libpldm/tmp.oQjw1lARBs/meson-logs/testlog.txt",
      "parentUuid": "cb8e7e9b_daf9d580",
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7accd107_012d1615",
        "filename": "tests/oem/meta/fileio.cpp",
        "patchSetId": 26
      },
      "lineNbr": 110,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "Please use `pldm_msgbuf_init_errno()` here and for all future work. `pldm_msgbuf_init_cc()` only exists to handle backwards-compatibility.",
      "range": {
        "startLine": 110,
        "startChar": 31,
        "endLine": 110,
        "endChar": 33
      },
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2d005091_9bfa1e01",
        "filename": "tests/oem/meta/fileio.cpp",
        "patchSetId": 26
      },
      "lineNbr": 110,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-23T08:55:50Z",
      "side": 1,
      "message": "Done. Please check, thank you.",
      "parentUuid": "7accd107_012d1615",
      "range": {
        "startLine": 110,
        "startChar": 31,
        "endLine": 110,
        "endChar": 33
      },
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "000c1c91_e7d2c775",
        "filename": "tests/oem/meta/fileio.cpp",
        "patchSetId": 26
      },
      "lineNbr": 117,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-08-23T00:48:09Z",
      "side": 1,
      "message": "The struct is not an array. Please insert each struct member explicitly.",
      "range": {
        "startLine": 115,
        "startChar": 4,
        "endLine": 117,
        "endChar": 61
      },
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9b105c20_ca211aff",
        "filename": "tests/oem/meta/fileio.cpp",
        "patchSetId": 26
      },
      "lineNbr": 117,
      "author": {
        "id": 1002130
      },
      "writtenOn": "2024-08-23T08:55:50Z",
      "side": 1,
      "message": "Done. Please check, thank you.",
      "parentUuid": "000c1c91_e7d2c775",
      "range": {
        "startLine": 115,
        "startChar": 4,
        "endLine": 117,
        "endChar": 61
      },
      "revId": "8944b29aa0dab5b0e7959fcb5c06bfd39b8b656c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}